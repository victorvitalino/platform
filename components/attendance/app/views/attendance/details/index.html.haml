.panel.panel-default
  .panel-heading
    %h4.panel-title
      Atendimento habitacional
  .panel-body
    .row
      .col-md-2
        %h1 Menu
      .col-md-9.col-md-offset-1
        .row
          .col-md-12
            %h1 Agendamentos
        %br/
        .row
          .col-md-12
            = simple_form_for url_for, method: :get do |f|
              .row
                .col-md-5
                  = f.input :by_schedule, label: "Agenda", as: :select, collection: Schedule::Agenda.active, include_blank: "Todas", input_html: { name: 'by_schedule'}, selected: params[:by_schedule]
                .col-md-3
                  = f.input :by_date, label: "Data", input_html: { name: 'by_date', :id => "selector", class: 'date', value: params[:by_date]}
                .col-md-3
                  = f.input :by_status, label: "Situação", as: :select, collection: Schedule::AgendaSchedule.statuses.map { |k,v| [k.humanize, k]}, selected: params[:by_status], input_html: { name: 'by_status'}, include_blank: "Todas"
              .row
                .col-md-5
                  = f.input :by_name, label: "Nome do candidato", input_html: { placeholder: "Digite o nome do candidato", name: 'by_name', value: params[:by_name]}
                .col-md-3
                  = f.input :by_cpf, label: "CPF", input_html: { class: 'cpf', name: 'by_cpf', value: params[:by_cpf]}
                .col-md-3
                  = f.submit "Filtar agendamentos", name: nil, class: 'btn btn-success filter-button', data: { disable_with: t(:disable_with)}
        %hr/
        .row
          .col-md-12
            %b Total listado:
            = @schedules.count
        %hr/
        .row
          .col-md-12
            %table.table.table-striped.table-condensed.table-hover.table-bordered
              %thead
                %tr
                  %th #
                  %th Nome
                  %th CPF
                  %th Data
                  %th Horário
                  %th Situação
                  %th Ação
              %tbody
                - @schedules.each do |item|
                  %tr
                    %td.col-md-1= item.id
                    %td.col-md-6= item.name
                    %td.col-md-2= item.cpf.format_cpf if item.cpf.present?
                    %td.col-md-1= item.date.strftime('%d/%m/%Y')
                    %td.col-md-1= item.hour.strftime('%H:%M')
                    %td
                      %b= item.status.humanize.downcase
                    %td
                      .btn-group{:role => "group"}
                        %button.btn.btn-default.dropdown-toggle{"aria-expanded" => "false", "aria-haspopup" => "true", "data-toggle" => "dropdown", :type => "button"}
                          %i.glyphicon.glyphicon-cog
                          %span.caret
                        %ul.dropdown-menu
                          %li
                            = link_to 'Realizar atendimento', detail_path(item.cpf.unformat_cpf)
                          %li
                            %a{:href => "#"} Finalizar, com retorno
                          %li
                            %a{:href => "#"} Finalizar, sem retorno
                          %li
                            = link_to "Cancelar agendamento", "#"


        