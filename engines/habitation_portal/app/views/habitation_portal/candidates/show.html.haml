/ conteudo da pagina
.container
  .row
    .col-md-12.box
      .box_internal
        .row
          .col-md-12
            .container
              %h1
                %b Detalhe do Cadastro
              %h4
                = link_to "Atualizar dados"
                |
                = link_to "Voltar para listas", :back
              
        %hr/
        .row
          .col-md-12
            .container
              %h2 
                %b Dados do Cadastro
              = link_to "Quais critérios que definem esta posição e situação?" 
        .row
          .col-md-12
            %table#data-table-command.table.table-striped.table-vmiddle.datatable
              %thead
                %tr
                  %th Status do Cadastro
                  %th Posição
                  %th Última Pontuação
              %tbody
                %tr
                  %td 
                    %span.label.label-primary
                      = @candidate.cadastre_situations.last.situation_statuses.name 
                  %td
                    %span.label.label-primary
                      #{@candidate.pontuations.last.position} º
                  %td 
                    %span.label.label-primary
                      #{@candidate.pontuations.last.total}
        %hr/
        .row
          .col-md-12
            .container
              %h2 
                %b Dados Pessoais
        .row
          .col-md-12
            %table#data-table-command.table.table-striped.table-vmiddle.datatable
              %thead
                %tr
                  %th{colspan: 3} Nome Completo
                  %th CPF
                  %th RG
                  %th Nascimento
                  %th Idade
              %tbody
                %tr
                  %td{colspan: 3}= @candidate.name 
                  %td= @candidate.cpf 
                  %td= @candidate.rg 
                  %td= @candidate.born.strftime('%d/%m/%Y') 
                  %td= "#{Date.today.year - @candidate.born.year} anos" 
              %thead
                %tr
                  %th Sexo
                  %th Estado Cívil
                  %th Chegada ao DF
                  %th Naturalidade
                  %th Condição Especial
                  %th CID
                  %th NIS
              %tbody
                %tr
                  %td.col-md-1= @candidate.gender 
                  %td.col-md-2= @candidate.civil_state.name if @candidate.civil_state.present?
                  %td.col-md-1= @candidate.arrival_df.strftime('%d/%m/%Y')
                  %td.col-md-1= "#{@candidate.place_birth} #{@candidate.born_uf}"  
                  %td.col-md-2= @candidate.special_condition.name if @candidate.special_condition.present?
                  %td.col-md-1= @candidate.cid
                  %td.col-md-1= @candidate.nis
       
        %hr/
        .row
          .col-md-12
            .container
              %h2
                %b Dependentes
        .row
          .col-md-12
            %table#data-table-command.table.table-striped.table-vmiddle.datatable
              %thead
                %tr
                  %th Nome Completo
                  %th CPF
                  %th RG
                  %th Nascimento
                  %th Idade
                  %th Co-adquirente?
              %tbody
                - @candidate.dependents.each do |dependent|
                  %tr
                    %td.col-md-3= dependent.name
                    %td.col-md-2= dependent.cpf 
                    %td.col-md-2= dependent.rg 
                    %td.col-md-1= dependent.born.strftime('%d/%m/%Y') 
                    %td.col-md-1= "#{Date.today.year - dependent.born.year} anos"          
                    %td.col-md-2    
        %hr/
        .row
          .col-md-12
            .container
              %h2 
                %b Dados de Contato
              = link_to "Atualizar meus dados de contato" 
        .row
          .col-md-12
            %table#data-table-command.table.table-striped.table-vmiddle.datatable
              %thead
                %tr
                  %th Telefone
                  %th Telefone Opcional
                  %th Celular
                  %th E-mail
              %tbody
                %tr
                  %td.col-md-1= @candidate.telephone 
                  %td.col-md-1= @candidate.telephone_optional
                  %td.col-md-1= @candidate.celphone
                  %td.col-md-3= @candidate.email
            %table#data-table-command.table.table-striped.table-vmiddle.datatable
              %thead
                %tr
                  %th Cidade
                  %th Endereço
                  %th Complemento
                  %th CEP
              %tbody
                %tr
                  %td.col-md-2= @candidate.city.name if @candidate.city.present?
                  %td.col-md-4= @candidate.address
                  %td.col-md-3= @candidate.address_complement
                  %td= @candidate.cep
            %table#data-table-command.table.table-striped.table-vmiddle.datatable
              %thead
                %tr
                  %th.col-md-6 Endereço Trabalho
                  %th.col-md-1 Cidade Trabalho
                  %th.col-md-3 CEP Trabalho
              %tbody
                %tr
                  %td.col-md-4= @candidate.work_address
                  %td.col-md-3= @candidate.work_city.name if @candidate.work_city.present?
                  %td.col-md-2= @candidate.work_cep
        %hr/
        .row
          .col-md-12
            .container
              %h2 
                %b Pontuações
              = link_to "Como funciona a pontuação?"
        .row
          .col-md-12
            %table#data-table-command.table.table-striped.table-vmiddle.datatable
              %thead
                %tr
                  %th Data
                  %th Posição
                  %th Renda Familiar
                  %th Tempo de Brasília
                  %th Dependentes
                  %th Condição Especial
                  %th Tempo de Lista
                  %th Total
              %tbody
                - @candidate.pontuations.order(:code).each do |pontuation|
                  %tr
                    %td
                      %span.label.label-success
                        %b= Date.parse(pontuation.code.to_s).strftime('%d/%m/%Y')
                    %td 
                      %span.label.label-primary
                        #{pontuation.position} º
                    %td= pontuation.income
                    %td= pontuation.bsb
                    %td= pontuation.dependent
                    %td= pontuation.special_condition
                    %td= pontuation.timelist
                    %td= pontuation.total
        %hr/
        .row
          .col-md-12
            .container
              %h2 
                %b Atendimentos & Agendamentos
              = link_to "Realizar agendamento"
        .row
          .col-md-12
            %table#data-table-command.table.table-striped.table-vmiddle.datatable
              %thead
                %tr
                  %th Status
                  %th Convocação
                  %th Observação
                  %th Data
              %tbody
                - @candidate.attendances.order(:created_at).each do |attendance|
                  %tr
                    %td= attendance.attendance_status.name if attendance.attendance_status.present?
                    %td= attendance.convocation.name if attendance.convocation.present?
                    %td= attendance.observation
                    %td= attendance.created_at.strftime('%d/%m/%Y às %H:%M')
        %hr/
        .row
          .col-md-12
            .container
              %h2 
                %b Informações da Construtora
        .row
          .col-md-12
            %table#data-table-command.table.table-striped.table-vmiddle.datatable
              %thead
                %tr
                  %th Status
                  %th Observação
                  %th Data
              %tbody
